include ./partials/__header.jade
include ./partials/__navbar.jade
mixin navigation(loggedIn, seshName)
include ./partials/__jumbodashboard.jade
div#newPoll(style="#{ displayDelete ? 'display: none;' : 'display:block;' }")
  form#newPollForm(method="POST")
    h1.greenText New Poll
    label
      span.greenText Name your poll.
      br
      textarea#pollNameInput(name='pollName', placeholder='Favorite color?')
    br
    label#optionList
      span.greenText Options
      br
      input.option(type='text', name='options[0]', placeholder='Red')
      br
      input.option(type='text', name='options[1]', placeholder='Blue')
      input(name="action" value="addPoll" style="display:none;")
    br
    button#addOption Add an Option
    br
    br
    input(type='submit', value='Create New Poll')
div#oldPolls(style="#{ displayDelete ? 'display: block;' : 'display:none;' }")
  ul
  if polls
      table
        for poll in polls
          tr
            form#deletePollForm(method="POST")
              td
                a(href="/polls/"+poll.id)= poll.name
                input(name="action" value="deletePoll" style="display:none;")
              td
                button.deletePollButton(name="deleteID" value=poll.id type="submit") Delete
script.
    var optionsLength = 2;
    $("#addOption").on("click", function(){
    var input = $("<br /><input type='text' name='options[" + optionsLength + "] class='option'/>");
    optionsLength++;
    $("#optionList").append(input);
    return false;
    });
      
    $("#newPollButton").on("click", function(){
      $("#newPoll").attr("style", "display:block");
      $("#oldPolls").attr("style", "display:none");
    });
    $("#existingPollButton").on("click", function(){
      $("#newPoll").attr("style", "display:none");
      $("#oldPolls").attr("style", "display:block");
    });
    
if error
  include ./partials/__error.jade
  mixin errorDisplay(error)
if success
  include ./partials/__success.jade
  mixin successDisplay(success)