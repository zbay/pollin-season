include ./partials/__header.jade
include ./partials/__navbar.jade
mixin navigation(loggedIn, seshName)
include ./partials/__jumbodashboard.jade
br
form#newPollForm(method="POST")
  h1 New Poll
  label
    | Name your poll.
    br
    textarea#pollNameInput(name='pollName', placeholder='Favorite color?')
  br
  label#optionList
    | Options
    br
    input.option(type='text', name='options[0]', placeholder='Red')
    br
    input.option(type='text', name='options[1]', placeholder='Blue')
  br
  button#addOption Add an Option
  br
  input(type='submit', value='Save New Poll')
div#oldPolls(style='display:none;')
  ul
  if polls
      for poll in polls
        li
          a(href="/polls/"+poll.id)= poll.name
          button.deletePollButton(name=poll.id) Delete
        br
script.
    var optionsLength = 2;
    $("#addOption").on("click", function(){
    var input = $("<br /><input type='text' name='options[" + optionsLength + "] class='option'/>");
    optionsLength++;
    $("#optionList").append(input);
    return false;
    });
      
    $("#newPollButton").on("click", function(){
      $("#newPollForm").attr("style", "display:block");
      $("#oldPolls").attr("style", "display:none");
    });
    $("#existingPollButton").on("click", function(){
      $("#newPollForm").attr("style", "display:none");
      $("#oldPolls").attr("style", "display:block");
    });
    
    $(".deletePollButton").on("click", function(){
    var postID = $(this).attr("name");
      //SEND DELETE AJAX REQUEST
      $.ajax({
      method: "DELETE",
      url: "/dashboard",
      data: {deleteID: postID} 
      }).done(function() {
        $( this ).parent.remove();
        });
      });
    
if error
  include ./partials/__error.jade
  mixin errorDisplay(error)
if success
  include ./partials/__success.jade
  mixin successDisplay(success)